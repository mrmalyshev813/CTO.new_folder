<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–µ—Å—Ç - Adlook</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 50px auto; padding: 20px; }
        input { width: 100%; padding: 10px; font-size: 16px; margin-bottom: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; margin-top: 10px; }
        #result { margin-top: 30px; white-space: pre-wrap; background: #f5f5f5; padding: 20px; display: none; }
        #loading { display: none; color: #666; margin-top: 10px; }
        .zone { background: white; padding: 10px; margin: 10px 0; border-left: 4px solid #28a745; }
        .api-key-section { background: #fff3cd; padding: 15px; margin-bottom: 20px; border-radius: 5px; border-left: 4px solid #ffc107; }
        #apiKeyInput { font-family: monospace; font-size: 14px; }
    </style>
</head>
<body>
    <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–µ—Å—Ç</h1>
    <p>–æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ Adlook</p>
    
    <div class="api-key-section">
        <label for="apiKeyInput"><strong>OpenAI API Key:</strong></label>
        <input type="password" id="apiKeyInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à OpenAI API –∫–ª—é—á" />
        <small style="color: #666; display: block; margin-top: 5px;">–ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</small>
    </div>
    
    <input type="url" id="urlInput" placeholder="–í–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://nlabteam.com)" />
    <button onclick="analyze()">–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
    
    <div id="loading">
        ‚è≥ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∞–π—Ç...<br>
        <small>–î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –ø–æ–º–æ—â—å—é AI</small>
    </div>
    <div id="result"></div>

    <script>
        function getApiKey() {
            let apiKey = document.getElementById('apiKeyInput').value;
            if (!apiKey) {
                apiKey = localStorage.getItem('openai_api_key');
                if (apiKey) {
                    document.getElementById('apiKeyInput').value = apiKey;
                }
            } else {
                localStorage.setItem('openai_api_key', apiKey);
            }
            return apiKey;
        }
        
        async function analyze() {
            const url = document.getElementById('urlInput').value;
            if (!url) return alert('–í–≤–µ–¥–∏—Ç–µ URL');
            
            const apiKey = getApiKey();
            if (!apiKey) return alert('–í–≤–µ–¥–∏—Ç–µ OpenAI API –∫–ª—é—á');
            
            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            
            try {
                // 1. Get screenshot URL
                const screenshotUrl = await getScreenshot(url);
                
                // 2. Analyze screenshot with OpenAI Vision
                const analysis = await analyzeWithVision(url, screenshotUrl, apiKey);
                
                // 3. Generate proposal
                const proposal = generateProposal(url, analysis.zones);
                
                // 4. Display results
                displayResults(proposal, analysis.zones, screenshotUrl);
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        async function getScreenshot(url) {
            return `https://image.thum.io/get/width/1200/crop/800/${url}`;
        }
        
        async function analyzeWithVision(url, screenshotUrl, apiKey) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: 'gpt-4o-mini',
                    messages: [{
                        role: 'user',
                        content: [
                            {
                                type: 'text',
                                text: `–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–∫—Ä–∏–Ω—à–æ—Ç —Å–∞–π—Ç–∞ ${url} –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –≥–¥–µ –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Ä–µ–∫–ª–∞–º—É.

–í–∏–∑—É–∞–ª—å–Ω–æ –æ—Ü–µ–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∑–æ–Ω—ã:

1. Header (–®–∞–ø–∫–∞) - –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
2. Sidebar (–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å) - –ø—Ä–∞–≤–∞—è –∏–ª–∏ –ª–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞
3. Content (–ö–æ–Ω—Ç–µ–Ω—Ç) - –º–µ–∂–¥—É —Å—Ç–∞—Ç—å—è–º–∏, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ
4. Footer (–ü–æ–¥–≤–∞–ª) - –Ω–∏–∂–Ω—è—è —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã
5. Popup (–í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ) - –µ—Å—Ç—å –ª–∏ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞

–î–ª—è –∫–∞–∂–¥–æ–π –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∑–æ–Ω—ã —É–∫–∞–∂–∏:
- name: –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã
- priority: "high" –¥–ª—è —Å–∞–º—ã—Ö –∑–∞–º–µ—Ç–Ω—ã—Ö –º–µ—Å—Ç, "medium" –¥–ª—è –º–µ–Ω–µ–µ –∑–∞–º–µ—Ç–Ω—ã—Ö, "low" –¥–ª—è –Ω–µ–∑–∞–º–µ—Ç–Ω—ã—Ö
- description: –ø–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–µ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ä–µ–∫–ª–∞–º—ã, –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–Ω–µ—Ä–∞ –ø–æ–¥–æ–π–¥–µ—Ç

–í–ê–ñ–ù–û: –£–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –∑–æ–Ω—ã —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º high –∏–ª–∏ medium (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –º–µ—Å—Ç–∞).

–í–µ—Ä–Ω–∏ —Ç–æ–ª—å–∫–æ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
{
  "zones": [
    {"name": "Header", "priority": "high", "description": "–í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –±–æ–ª—å—à–æ–π –ø–ª–æ—â–∞–¥—å—é, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞ 728x90 –∏–ª–∏ 970x250"},
    {"name": "Sidebar", "priority": "medium", "description": "–ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∞–Ω–Ω–µ—Ä–æ–≤ 300x250 –∏–ª–∏ 300x600"}
  ]
}`
                            },
                            {
                                type: 'image_url',
                                image_url: {
                                    url: screenshotUrl,
                                    detail: 'low'
                                }
                            }
                        ]
                    }],
                    response_format: { type: 'json_object' },
                    max_tokens: 1000
                })
            });
            
            if (!response.ok) {
                const error = await response.json();
                throw new Error(`OpenAI API error: ${error.error?.message || response.statusText}`);
            }
            
            const result = await response.json();
            return JSON.parse(result.choices[0].message.content);
        }
        
        function generateProposal(url, zones) {
            const priorityZones = zones.filter(z => z.priority === 'high' || z.priority === 'medium');
            const zonesList = priorityZones.map((z, i) => {
                const priorityText = z.priority === 'high' ? '–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç' : '—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç';
                return `${i+1}. ${z.name} - ${priorityText}\n   ${z.description}`;
            }).join('\n\n');
            
            return `–¢–µ–º–∞: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —Ä–µ–∫–ª–∞–º–µ –Ω–∞ —Å–∞–π—Ç–µ ${url}

–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!

–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ —Ö–æ—á—É –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å –≤–∞—Å —Å —É—Å–ø–µ—à–Ω—ã–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º –≤–∞—à–µ–≥–æ —Ä–µ—Å—É—Ä—Å–∞. ${url} –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç —à–∏—Ä–æ–∫—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é. –ú—ã –≤ Adlook —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≥—Ä–∞–º–æ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã –ø–æ–∑–≤–æ–ª–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ—Ö–æ–¥.

–ù–µ–º–Ω–æ–≥–æ –æ –Ω–∞—Å: Adlook - —ç—Ç–æ —Ä–æ—Å—Å–∏–π—Å–∫–∞—è SSP-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Supply-Side Platform), –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –≤ 2018 –≥–æ–¥—É –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ. –ú—ã –ø–æ–º–æ–≥–∞–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞–º —Å–∞–π—Ç–æ–≤ –º–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã —Å –ø–æ–º–æ—â—å—é –±–∞–Ω–Ω–µ—Ä–Ω–æ–π –∏ –≤–∏–¥–µ–æ—Ä–µ–∫–ª–∞–º—ã. –ó–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –º—ã –ø–æ–∫–∞–∑–∞–ª–∏ –±–æ–ª–µ–µ 6 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ –∏ –≤—ã–ø–ª–∞—Ç–∏–ª–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º –±–æ–ª–µ–µ 550 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä—É–±–ª–µ–π.

–ú—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –≤–∞—à —Å–∞–π—Ç –∏ –≤—ã–¥–µ–ª–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–æ–Ω –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ä–µ–∫–ª–∞–º—ã:

${zonesList}

–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥: –æ—Ç 50,000 –¥–æ 150,000 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü.

–ß—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º:
- –°—Ä–æ–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: –æ—Ç –æ–¥–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞
- –§–æ—Ä–º–∞—Ç—ã: –±–∞–Ω–Ω–µ—Ä—ã, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞, –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞
- –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∫–ª–∞–º—ã –ø–æ–¥ –≤–∞—à —Å–∞–π—Ç
- –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

–ú—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —Å Adlook —Å—Ç–∞–Ω–µ—Ç –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω—ã–º. –î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –¥–µ—Ç–∞–ª–∏ –ª–∏—á–Ω–æ –∏–ª–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É!

–° —É–≤–∞–∂–µ–Ω–∏–µ–º,
–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏, Adlook`;
        }
        
        function displayResults(proposal, zones, screenshotUrl) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <div style="margin: 20px 0;">
                    <h3>–°–∫—Ä–∏–Ω—à–æ—Ç —Å–∞–π—Ç–∞:</h3>
                    <div style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 10px; background: white;">
                        <img src="${screenshotUrl}" alt="–°–∫—Ä–∏–Ω—à–æ—Ç —Å–∞–π—Ç–∞" style="max-width: 100%; height: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                    </div>
                </div>
                
                <h3>–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∑–æ–Ω—ã (–ø–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É AI):</h3>
                ${zones.map(z => `
                    <div class="zone" style="background: white; padding: 15px; margin: 10px 0; border-left: 4px solid ${z.priority === 'high' ? '#28a745' : '#ffc107'}; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <strong style="font-size: 18px;">${z.name}</strong>
                            <span style="background: ${z.priority === 'high' ? '#28a745' : '#ffc107'}; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold;">
                                ${z.priority === 'high' ? '–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢' : '–°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢'}
                            </span>
                        </div>
                        <p style="margin: 0; color: #666;">${z.description}</p>
                    </div>
                `).join('')}
                
                <div style="margin-top: 30px;">
                    <h3>–ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç Adlook:</h3>
                    <div style="background: white; padding: 25px; border: 1px solid #ddd; border-radius: 8px; white-space: pre-wrap; line-height: 1.6;">
${proposal}
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button onclick="copyToClipboard()" style="padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-right: 10px;">
                        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Å—å–º–æ
                    </button>
                </div>
            `;
            resultDiv.style.display = 'block';
            window.currentProposal = proposal;
        }
        
        function copyToClipboard() {
            navigator.clipboard.writeText(window.currentProposal);
            alert('‚úÖ –¢–µ–∫—Å—Ç –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
        }
        
        // Load saved API key on page load
        window.addEventListener('DOMContentLoaded', () => {
            const savedApiKey = localStorage.getItem('openai_api_key');
            if (savedApiKey) {
                document.getElementById('apiKeyInput').value = savedApiKey;
            }
        });
    </script>
    
    <footer style="margin-top: 50px; text-align: center; color: #666;">
        AI-powered –∞–Ω–∞–ª–∏–∑ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –º–µ—Å—Ç by NLABTEAM
    </footer>
</body>
</html>
